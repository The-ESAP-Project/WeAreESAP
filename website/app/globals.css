/**
 * Copyright 2025 The ESAP Project
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

@import "tailwindcss";

/* 配置 dark mode 使用 class 选择器 */
@custom-variant dark (&:where(.dark, .dark *));

/* 浅色主题（默认） */
:root {
  --background: #ffffff;
  --foreground: #0a0a0a;
  --muted: #f5f5f5;
  --muted-foreground: #737373;
  --border: #e5e5e5;

  /* ESAP 三色 */
  --esap-yellow: #ffd93d;
  --esap-yellow-dark: #ffc107;
  --esap-pink: #ff69b4;
  --esap-pink-dark: #ff1493;
  --esap-blue: #4da6ff;
  --esap-blue-dark: #2e8fff;
}

/* 深色主题 */
:root[class~="dark"] {
  --background: #0a0a0a;
  --foreground: #ededed;
  --muted: #1a1a1a;
  --muted-foreground: #a3a3a3;
  --border: #262626;

  /* ESAP 三色（深色模式下稍微调整） */
  --esap-yellow: #ffd93d;
  --esap-yellow-dark: #ffed4e;
  --esap-pink: #ff69b4;
  --esap-pink-dark: #ff85c8;
  --esap-blue: #4da6ff;
  --esap-blue-dark: #66b3ff;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-border: var(--border);

  /* ESAP 颜色系统 */
  --color-esap-yellow: var(--esap-yellow);
  --color-esap-yellow-dark: var(--esap-yellow-dark);
  --color-esap-pink: var(--esap-pink);
  --color-esap-pink-dark: var(--esap-pink-dark);
  --color-esap-blue: var(--esap-blue);
  --color-esap-blue-dark: var(--esap-blue-dark);

  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

/* 自动适配系统主题偏好 */
@media (prefers-color-scheme: dark) {
  :root:not([class~="light"]) {
    --background: #0a0a0a;
    --foreground: #ededed;
    --muted: #1a1a1a;
    --muted-foreground: #a3a3a3;
    --border: #262626;
  }
}

/* 全局平滑滚动 */
html {
  scroll-behavior: smooth;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-geist-sans), Arial, Helvetica, sans-serif;
  transition:
    background-color 0.3s ease,
    color 0.3s ease;
}

/* 颜色过渡工具类 - 按需使用 */
.transition-colors-smooth {
  transition-property: color, background-color, border-color;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
}

/* 为链接和按钮添加默认过渡 */
a,
button,
[role="button"] {
  transition-property: color, background-color, border-color, opacity;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
}

/* 减少动画支持 - 尊重用户的无障碍偏好设置 */
@media (prefers-reduced-motion: reduce) {
  /* 禁用平滑滚动 */
  html {
    scroll-behavior: auto;
  }

  /* 将所有动画和过渡设置为极短时间（几乎无延迟） */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* 保留必要的不透明度过渡（用于内容加载） */
  body {
    transition: none;
  }
}
